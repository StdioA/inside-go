"use strict";function getCookie(t){var o=null;if(document.cookie&&""!=document.cookie)for(var e=document.cookie.split(";"),n=0;n<e.length;n++){var i=jQuery.trim(e[n]);if(i.substring(0,t.length+1)==t+"="){o=decodeURIComponent(i.substring(t.length+1));break}}return o}var app=new Vue({data:{show:!0,error:{status:!1,message:""},post_id:0,previous_id:0,next_id:0,post:{},csrf_token:getCookie("csrftoken")},methods:{add_comment:function(t){var o=this,e={csrfmiddlewaretoken:getCookie("csrftoken"),author:$("input[name=author]").val(),content:$("input[name=content]").val()};$.post("/api/comment/"+this.post_id,e,function(t){t.success&&(o.post.comments.push({author:e.author,content:e.content}),$("input[name=author]").val(""),$("input[name=content]").val(""))},"JSON"),this.csrf_token=getCookie("csrftoken")},jump:function(t){var o;this.show=!1,"pageup"==t.target.id?o=this.previous_id:"pagedown"==t.target.id&&(o=this.next_id),$.getJSON("/api/"+o,function(t,e){app.show=!0,app.post_id=t.post.id,app.post=t.post,app.previous_id=t.previous_id,app.next_id=t.next_id,history.pushState({},"","/"+o)})}},init:function(){var t=window.location.pathname.split("/")[1],o=this;$.getJSON("/api/"+t,function(t,e){"success"==e&&t.success?(o.post_id=t.post.id,o.post=t.post,o.previous_id=t.previous_id,o.next_id=t.next_id):(o.error.status=!0,o.error.message=t.reason)})}});$(document).ready(function(){var t=["blue","green","yellow","purple"],o=t[Math.floor(Math.random()*t.length)];$("body").addClass("bg-"+o),app.$mount("#content_bg")});