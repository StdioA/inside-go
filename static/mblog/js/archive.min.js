"use strict";var post_note=Vue.component("postnote",{template:"#post-note",data:function(){var o=["pink","blue","green","orange","yellow"],t=o[Math.floor(Math.random()*o.length)];return{color:t}},props:["post"],methods:{enter:function(o){var t=o.id;location.href="/"+t},get_summary:function(o){var t=o.content.split("\n").slice(0,3).map(function(o){return o.length>40&&(o=o.slice(0,40)+"â€¦"),o});return t}}}),app=new Vue({data:{ready:!1,posts:[],more:{more_lock:!1,posts_end:!1}},methods:{get_more:function(o){var t=6,e=this,n=this.posts[this.posts.length-1].id-1;e.more.more_lock||(e.more.more_lock=!0,$.get("api/archive/"+n+"/counts/"+t,function(o){e.posts=e.posts.concat(o.posts),o.posts.length!=t&&(e.more.posts_end=!0),e.more.more_lock=!1}))}},init:function(){var o=this,t=Number(location.hash.replace("#",""));t=isNaN(t)||t<=0?"":String(t),$.getJSON("/api/archive/"+t,function(t,e){"success"==e&&t.success?(o.posts=t.posts,o.ready=!0):(console.log(t),console.log(e),location.href="/login")})}});$(document).ready(function(){app.$mount("#archives")});